components:
  parameters:
    membersSortParam:
      name: sort
      description: Sorting to apply.
      in: query
      style: form
      explode: true
      required: false
      schema:
        type: array
        items:
          type: string
          pattern: '^(firstName|lastName|number)\|(asc|desc)$'
          example: username|asc
  schemas:
    Member:
      type: object
      required: [number, name]
      properties:
        number:
          $ref: '../common/ids.yml#/components/schemas/Id'
        name:
          $ref: 'contacts.yml#/components/schemas/ContactName'
        active:
          type: boolean
          description: Whether the member is active.
        renew:
          type: boolean
          description: Whether the member is eligible for renewal.
    MemberContact:
      type: object
      required: [number, name]
      properties:
        number:
          $ref: '../common/ids.yml#/components/schemas/Id'
        identifier:
          type: string
          description: Unique identifier of the contact.
        name:
          $ref: 'contacts.yml#/components/schemas/ContactName'
        birthDate:
          $ref: '../common/dates.yml#/components/schemas/Date'
        contactChannels:
          type: array
          items:
            $ref: 'contacts.yml#/components/schemas/ContactChannel'
        comments:
          type: string
          description: Comments about the contact.
        active:
          type: boolean
          description: Whether the member is active.
        renew:
          type: boolean
          description: Whether the member is eligible for renewal.
    MemberCreation:
      type: object
      required: [name]
      properties:
        name:
          $ref: 'contacts.yml#/components/schemas/EditionContactName'
    MemberContactCreation:
      type: object
      required: [name]
      properties:
        identifier:
          type: string
          description: Unique identifier of the contact.
        name:
          $ref: 'contacts.yml#/components/schemas/EditionContactName'
    MemberChange:
      type: object
      properties:
        active:
          type: boolean
          description: Whether the member is active.
        renew:
          type: boolean
          description: Whether the member is eligible for renewal.
    MemberContactChange:
      type: object
      properties:
        identifier:
          type: string
        name:
          $ref: 'contacts.yml#/components/schemas/EditionContactName'
        birthDate:
          $ref: '../common/dates.yml#/components/schemas/Date'
        contactChannels:
          type: array
          items:
            $ref: 'contacts.yml#/components/schemas/EditionContactChannel'
        comments:
          type: string
        active:
          type: boolean
          description: Whether the member is active.
        renew:
          type: boolean
          description: Whether the member is eligible for renewal.
    MemberStatus:
      type: string
      description: Status filter for contact queries.
      enum: [ACTIVE, INACTIVE, ALL]
    MemberPageResponse:
      allOf:
        - $ref: '../common/responses.yml#/components/schemas/PageResponse'
        - type: object
          properties:
            content:
              type: array
              items:
                $ref: '#/components/schemas/Member'
    MemberContactPageResponse:
      allOf:
        - $ref: '../common/responses.yml#/components/schemas/PageResponse'
        - type: object
          properties:
            content:
              type: array
              items:
                $ref: '#/components/schemas/MemberContact'
    MemberResponse:
      type: object
      properties:
        content:
          $ref: '#/components/schemas/Member'
    MemberContactResponse:
      type: object
      properties:
        content:
          $ref: '#/components/schemas/MemberContact'